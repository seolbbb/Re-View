# Lecture-Note-AI TODO

## 1. 프로젝트 준비
- [ ] `.env` 실제 값 채우기: Clova Speech URL/API Key/Secret, GEMINI_API_KEY, VIDEO_PATH, 필요시 PADDLE_OCR_MODEL_DIR. 각 서비스 호출이 실패 없이 돌아가도록 환경 변수 정합성 확보.
- [ ] `pip install -r requirements.txt`: OpenCV/PaddleOCR/Gemini SDK 등 의존성 설치 확인, 파이썬 버전 호환성 점검.
- [ ] 샘플 영상 `data/input/` 배치: 파이프라인 입출력 경로 권한 확인 및 최소 동작용 테스트 미디어 준비.

## 2. 캡처(비전)
- [ ] `SlideExtractor` 파라미터 튜닝: 히스토그램 상관 임계값과 프레임 샘플링 간격을 결정해 슬라이드 전환을 민감하게/둔감하게 조정, `.env` 연동 여부 결정.
- [ ] 저장 경로/에러 처리: `data/output/images/` 생성 확인, 비디오 로드 실패나 프레임 저장 실패 시 예외 메시지 표준화.
- [ ] 단위 테스트: 짧은 샘플 영상으로 예상 슬라이드 개수와 타임스탬프 정렬 검증.

## 3. 오디오(STT)
- [ ] Clova Speech 응답 스키마 확정: segments 필드 구조, 타임스탬프 단위 확인, 실패 코드/메시지 매핑.
- [ ] 오류/재시도 로직: 네트워크/서버 오류에 대한 재시도, 타임아웃, 동기/비동기 모드 분기 설계.
- [ ] 긴 오디오 처리: 60초 이상 영상에 대해 청크 분할 업로드 또는 비동기 폴링 전략 수립.
- [ ] 단위 테스트: 목업 응답으로 `AudioSegment` 변환 및 시작/종료 시간 검증.

## 4. OCR(PaddleOCR)
- [ ] 텍스트 판별 규칙: 수식/그래프 감지 힌트(수학 기호 리스트, bbox 패턴) 정의해 후속 LLM 지시문 최적화.
- [ ] 성능/속도 튜닝: 배치 처리 가능 여부, GPU 옵션 설정, 언어/angle 클래스 설정 검증.
- [ ] 품질 검증: 샘플 이미지로 `OcrBox` bbox 좌표와 텍스트 추출 정확도 확인, 수식 문자열 원본 유지 여부 확인.

## 5. 퓨전(정렬)
- [ ] 구간 정의 로직: 슬라이드 i 시작~슬라이드 i+1 시작 전까지 오디오 매핑, 겹침/빈 구간 처리 규칙 명시.
- [ ] 폴백 전략: 매핑 실패 시 이전/다음 슬라이드로 붙이거나 별도 미정리 섹션에 수집하는 정책 결정.
- [ ] 단위 테스트: 인위적 샘플(슬라이드/오디오/OCR)로 `FusedContext` 정렬 결과 일관성 검증.

## 6. LLM(노트 생성)
- [ ] 프롬프트 세부화: 톤(강의 노트), 길이, 섹션 구조(핵심 요약/세부 내용/수식/그래프 해석), 불확실성 표현 가이드 추가.
- [ ] 호출 관리: 토큰/컨텍스트 길이 모니터링, 청크 단위 요청, 재시도 및 예외 처리 설계.
- [ ] 단위 테스트: 목업 LLM 응답을 통한 Markdown 포맷 및 섹션 구분 검증.

## 7. 오케스트레이션
- [ ] 로깅/진행률: `main.py` 단계별 로그와 `tqdm` 진행률 표시 추가, 예외 시 명확한 에러 코드/메시지.
- [ ] 캐시/재실행: 중간 산출물(슬라이드 이미지, STT 결과, OCR JSON) 재사용 옵션과 스킵 플래그 설계.
- [ ] 통합 테스트: 샘플 영상 한 건으로 Capture→STT→OCR→Fusion→LLM 전체 흐름 검증, `notes.md` 생성 확인.

## 8. 품질/운영
- [ ] 도구 체인: 포매터/린터/타입체커(black/ruff/mypy 등) 선정 후 CI 워크플로 설계.
- [ ] 예외/메시지 표준화: 사용자용 에러 메시지 템플릿과 로깅 레벨 정책 정의.
- [ ] 문서화: README에 실행 방법, 의존성 캐싱, PaddleOCR 모델 다운로드/캐시 경로, API 키 관리 지침 추가.
