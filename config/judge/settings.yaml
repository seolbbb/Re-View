# -----------------------------------------------------------------------------
# Judge 모듈 평가 설정 파일
# 
# 이 파일은 LLM 기반 평가(Judge) 실행 시 필요한 파라미터들을 정의합니다.
# 실행 순서 및 논리적 흐름에 따라 그룹화되었습니다.
# -----------------------------------------------------------------------------

# =============================================================================
# 1. 프롬프트 및 평가 기준 (Evaluation Core)
#    : 평가를 수행할 주체(LLM)와 기준을 설정합니다.
# =============================================================================

# [프롬프트 파일]
# judge 실행 시 사용할 프롬프트 템플릿이 정의된 파일 경로입니다.
# 기본값: "prompts.yaml" (config/judge 디렉토리 내)
prompts_file: prompts.yaml

# [프롬프트 버전]
# prompts_file 내에서 실제 사용할 프롬프트의 버전 키(key)를 지정합니다.
# 예: v2 (Modular), v3 (Token Optimized) 등
# 버전을 변경하여 다양한 평가 기준 실험이 가능합니다.
prompt_version: v3

# [모델 온도 (Temperature)]
# LLM 생성 결과의 창의성/다양성을 조절합니다 (0.0 ~ 1.0).
# 평가는 일관되고 정확한 결과가 중요하므로, 낮은 값(0.0 ~ 0.2)을 권장합니다.
# 0에 가까울수록 결정론적(Deterministic)인 결과를 반환할 확률이 높습니다.
temperature: 0.2

# [최대 점수 (Max Score)]
# 평가 항목별 점수 척도의 최댓값을 설정합니다.
# 기본값은 10점 만점입니다. 프롬프트 내의 기준과 일치해야 합니다.
max_score: 10

# [최소 점수 기준 (Pass/Fail Criteria)]
# 리포트 생성 시 '통과' 여부를 판단하거나 필터링할 때 사용하는 기준 점수입니다.
# 현재는 메타데이터로 기록되며, 추후 자동 재작업 트리거 등에 활용될 수 있습니다.
min_score: 7.0


# =============================================================================
# 2. 실행 성능 및 제어 (Execution Control)
#    : 실제 평가 작업을 수행하는 방식(병렬 처리, 배치 등)을 제어합니다.
# =============================================================================

# [배치 크기 (Batch Size)]
# 한 번의 LLM API 호출에 포함할 세그먼트(문단)의 개수입니다.
# - 장점: 크기가 크면 API 호출 횟수가 줄어들어 전체 속도가 향상될 수 있습니다.
# - 단점: 너무 크면 LLM의 Context Window를 초과하거나, 응답 시간이 길어져 Timeout이 발생할 수 있습니다.
# 권장값: 3 ~ 5
batch_size: 4

# [워커 수 (Concurrency)]
# 동시에 실행할 병렬 작업(스레드)의 개수입니다.
# - 높을수록 전체 처리 속도가 빨라지지만, API 초당 요청 제한(Rate Limit)에 걸릴 위험이 있습니다.
# Vertex AI 또는 Gemini API의 할당량을 고려하여 설정해야 합니다.
workers: 2

# [JSON 복구 시도 (Error Handling)]
# LLM이 유효하지 않은 JSON 형식을 반환했을 때, 자동으로 재시도할 횟수입니다.
# 1로 설정 시, 파싱 오류가 발생하면 오류 메시지와 함께 다시 생성을 요청합니다.
# 복구 프롬프트를 통해 사소한 포맷 오류를 수정할 확률을 높여줍니다.
json_repair_attempts: 1


# =============================================================================
# 3. 출력 및 로그 (Output & Logging)
#    : 실행 결과 확인 및 디버깅 옵션입니다.
# =============================================================================

# [상세 로그 (Verbose)]
# 실행 중 발생하는 상세 정보를 콘솔에 출력할지 여부입니다.
# true로 설정 시, 배치 진행 상황, 평가된 세그먼트 ID, 소요 시간 등이 출력됩니다.
verbose: true

# [세그먼트 데이터 포함 여부 (Deprecated)]
# 최종 리포트 파일에 각 세그먼트의 원본 및 평가 상세 데이터를 모두 포함할지 여부입니다.
# 데이터 크기가 매우 커질 수 있으므로 false를 권장합니다.
# (상세 데이터는 별도의 judge_segments.jsonl 파일로 저장됩니다.)
include_segments: false
